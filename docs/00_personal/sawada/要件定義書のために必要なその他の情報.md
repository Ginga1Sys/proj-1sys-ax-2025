# 要件定義書のために必要なその他の情報

以下は、`ユーザーストーリー_顧客要求事項.md`、`機能要件.md`、`非機能要件.md`（以下、参照ファイル）を元に要件定義書を作成する際に「まだ明確でない」「追加で確認が必要」だと考えられる情報の一覧です。各項目について理由を簡単に示し、あなたが埋められるよう回答欄を用意しました。

---

**使い方**: 各項目の「回答欄」に必要な内容を記入してください。可能であれば担当者名・期限・参考資料のリンクも併せて記入してください。

---

- **ステークホルダー一覧（役割）**: 要件に影響を与える関係者（発注者、PO、運用担当、セキュリティ責任者など）を明確にするため。
  - 回答欄:
    - 主要ステークホルダー名・役割:
      - 発注者: AI活用推進部長（仮） — 要件決定、予算承認
      - PO: 社内AI担当プロダクトオーナー（仮） — 優先度決定、受け入れ判断
      - 開発責任者: 開発チームリード（仮） — 技術的意思決定
      - 運用担当: システム運用チーム（仮） — デプロイ・監視・障害対応
      - セキュリティ責任者: 情報セキュリティ室（仮） — セキュリティ要件の承認
      - サイト管理者: コンテンツ承認/ユーザー管理を行う管理者（仮）
    - 連絡先/備考:
      - すべての連絡先はプロジェクト初期に確定する。現時点では各役割を割り当て、メールは社内ドメイン（`@company.example` 等）を使用する想定。

- **スコープ（含める機能／除外する機能）**: 要件定義書で何が対象かを明確にするため。スコープ外を明示すると後の認識齟齬を防げます。
  - 回答欄:
    - スコープに含めるもの:
      - 社内向けAI活用ナレッジ共有サイト（投稿・編集機能、タグ付け、検索）
      - 投稿に対する「イイね」・コメント・返信機能
      - ユーザー認証（社内ドメインのメール制限を含む）と基本的なアクセス制御（ロールベース）
      - 投稿の編集履歴保存、管理者による承認ワークフロー（最小限）
      - 検索（キーワード、タグ、タイトル、本文、投稿者）
    - スコープ外（除外事項）:
      - 管理者向けの詳細ダッシュボード（将来的に検討）
      - 多言語対応（将来検討）
      - モバイル向け完全最適化（レスポンシブは将来的検討・今回暫定対応）
      - 本番環境へのフル自動デプロイ（今回の開発は疑似プロジェクト。将来のCI/CD設計は考慮）

- **業務フロー（主要ユースケースの手順）**: 画面遷移や操作手順、業務プロセスを明確にするため。業務フローがないとUI・API設計が曖昧になります。
  - 回答欄:
    - 主要な業務フロー（箇条書き可、図があれば添付）:
      - ユーザー登録/ログイン
        1. 新規ユーザーは社内メールアドレスで登録申請（社内ドメインに制限）
        2. メール認証後にアカウント有効化
        3. ログイン後、プロフィール編集
      - 投稿作成/編集/削除
        1. 投稿作成画面でタイトル/本文/タグ/ファイル添付を入力
        2. 投稿は「下書き」「公開リクエスト」などのステータスを持つ
        3. 管理者が承認したら公開（承認フローは最小実装）
      - 投稿への反応（イイね・コメント）
        1. 認証済みユーザーが投稿を閲覧
        2. 「イイね」やコメントを追加（コメントは返信を許可）
      - 検索/フィルタ
        1. 検索バーにキーワード入力→タイトル/本文/タグを横断検索
        2. タグやカテゴリーで絞り込み
      - 管理者操作
        1. 投稿の承認・却下、ユーザーの権限付与/変更

- **画面一覧と優先度（ワイヤー/必須入力項目）**: 画面ごとの目的、必須項目、推奨レイアウトがわかると設計と見積りが正確になります。
  - 回答欄:
    - 画面名と簡単な説明:
      - ホーム/ダッシュボード: 新着投稿、人気投稿、タグ一覧を表示
      - 投稿一覧（検索結果）: 検索バー、タグフィルタ、ソート
      - 投稿詳細: タイトル、本文、投稿者、投稿日、イイね、コメント欄、添付ファイル
      - 投稿作成/編集: タイトル（必須）、本文（必須）、タグ（任意）、添付ファイル（任意）、公開設定（必須）
      - ユーザープロフィール: 名前、所属、メール（社内ドメイン）、権限
      - 管理者画面（簡易）: 承認待ち投稿一覧、ユーザー管理
    - 各画面の必須項目:
      - 投稿作成: タイトル、本文、公開設定
      - 投稿詳細: 表示に必要な投稿ID/メタ情報
      - ログイン/登録: 社内メール、パスワード、メール認証

- **データ要件（エンティティ／項目定義）**: 保存するデータ項目、型、必須/任意、制約（サイズやフォーマット）を明確にするため。
  - 回答欄:
    - 主要エンティティ名と主要属性（例: ユーザー: 名前、メール、ロール）:
      - ユーザー
        - id (UUID)
        - 名前 (string)
        - メール (string, 社内ドメイン限定, unique)
        - ロール (enum: user, editor, admin)
        - 作成日時/更新日時
      - 投稿
        - id (UUID)
        - タイトル (string, 必須, max 255)
        - 本文 (text, 必須)
        - タグ (配列)
        - 添付ファイル参照 (list of objects: url, filename, size)
        - ステータス (enum: draft, pending, published, rejected)
        - 作成者ID、作成日時、更新日時
      - コメント
        - id, 投稿ID, 投稿者ID, 本文, 親コメントID（返信対応）, 作成日時
      - イイね(Like)
        - id, 投稿ID, ユーザーID, 作成日時
      - タグ
        - id, 名称, 作成日時
      - 監査ログ(AuditLog)
        - 操作種別、対象、実行者、タイムスタンプ

- **外部連携／依存システム**: 連携が必要な外部システム（メール/SMS、LDAP/AD、SSO、ファイルストレージ等）を明確にするため。接続方式や認証方式の確認が必要です。
  - 回答欄:
    - 連携先システムと役割:
      - メール送信（SMTP または社内メールサービス）: アカウント確認、パスワードリセット通知
      - ファイルストレージ（S3等）: 添付ファイル保存（本番想定）
      - 社内ディレクトリ/ID管理（将来的）: LDAP/AD/SSO（今回は未導入、将来検討）
    - 接続方式／認証方式（ある場合）:
      - SMTP（TLS）または社内メールAPI
      - S3互換ストレージへのAPIキー
      - 将来的にSSO導入する場合は SAML/OAuth2 を想定

- **認証・認可の詳細**: SSO/LDAPの利用、MFAの要否、セッション有効期限、ロール定義の粒度などを明確にするため。
  - 回答欄:
    - 認証方式（例: 社内SSO、メール認証）:
      - 現状想定: メール/パスワード認証（登録時に社内ドメインで制限しメール認証を行う）
      - 将来的: 社内SSO（SAML/OAuth2）への移行を見越した設計
    - 必要な認可ロール一覧:
      - Admin: ユーザー管理、投稿承認、全データ閲覧/操作
      - Editor: 投稿の編集・公開（自分とチームの投稿）
      - User: 投稿作成、コメント、イイね
      - Viewer (任意): 閲覧のみ
    - セッション/MFA:
      - セッション有効期限: 8時間（暫定）
      - MFA: 現時点は任意/保留。セキュリティ方針に応じて導入検討。

- **セキュリティ要件の詳細**: 暗号化要件、脆弱性対応方針、ログの暗号化や保存場所、脅威モデル／コンプライアンス要件（例: 個人情報保護）を明示するため。
  - 回答欄:
    - 必須のセキュリティ対策／規準:
      - 通信は常に TLS (HTTPS) を使用
      - パスワードは適切なハッシュ関数（bcrypt等）で保存
      - 添付ファイルはウイルスチェックの実装を検討
      - 重要ログは改ざん防止のため保管場所とアクセス制御を明確化
      - 定期的な脆弱性スキャンとセキュリティレビュー
    - コンプライアンス要件（該当する法規）:
      - 個人情報保護法（国内）に基づく個人情報管理
      - 社内情報セキュリティ基準への準拠（具体基準はセキュリティ責任者と確定）

- **非機能要件の数値化（SLA等）**: 応答時間の目標（p95/p99）、稼働率、RTO/RPO、バックアップ頻度、ログ保持期間などを明確にするため。
  - 回答欄:
    - 応答時間目標（例: p95 1.5秒）:
      - 目標: 一般ページ応答 3秒以内（要件文書に基づく）
      - 推奨: p95 1.5秒、p99 3秒（暫定）
    - 稼働率/SLA（例: 月間 99.5%）:
      - 目標稼働率: 99.9%（要件より）
    - RTO/RPO、バックアップ方針:
      - RTO: 4時間（暫定）
      - RPO: 24時間（暫定）
      - バックアップ頻度: 日次フルバックアップ（DB）、ファイルストレージは日次または増分
      - ログ保持期間: 90日（監査ログは別途30〜365日で検討）

- **対象環境とサポート対象ブラウザ/端末**: サポート対象OS/ブラウザ、モバイル対応範囲を明確にするため。
  - 回答欄:
    - サポート対象ブラウザとバージョン:
      - デスクトップ: Chrome (最新2バージョン), Microsoft Edge (最新2バージョン), Firefox (最新2バージョン)
      - IEはサポート対象外
    - モバイル対応の有無・範囲:
      - 今回はモバイル完全最適化はスコープ外。レスポンシブ対応は基本的なレイアウトで担保（将来的改善予定）

- **運用体制と権限（運用ルール）**: 障害時の対応フロー、オンコール、ログの確認者や運用権限などを決めるため。
  - 回答欄:
    - 運用担当（役割/名前/連絡先）:
      - 運用チーム（暫定）: 24/365のオンコールは不要だが、平日日中の対応体制を想定
      - 連絡先はプロジェクト開始時に確定
    - 障害対応フローの概要:
      - 障害検知 → アラート（監視） → 運用チームが一次対応 → 必要時に開発チームへエスカレーション → 障害復旧後、原因分析と対策実施

- **監視とアラート要件**: 監視対象（CPU、メモリ、レスポンス、エラーレート等）と閾値、通知方法を決めるため。
  - 回答欄:
    - 監視項目とアラート閾値（推奨）:
      - HTTP 5xx 発生率 > 1% でアラート
      - 平均応答時間（p95） > 2秒で警告、>3秒で重大アラート
      - CPU 使用率 > 80%（長時間）
      - ディスク空き容量 < 20%
      - DB 接続数異常増加
    - 通知先（Slack/メール等）:
      - 開発/運用チームの専用 Slack チャンネルへ通知
      - 重大障害はメールと Slack 両方に通知

- **テスト・受け入れ基準の具体化**: 受け入れテスト項目、合格基準、担当（受け入れ者）を明確にするため。
  - 回答欄:
    - 受け入れテストの主要ケース:
      - ユーザー登録／ログイン（社内メール制限、パスワードリセット）
      - 投稿の作成・編集・公開フロー（承認含む）
      - 検索機能（キーワード、タグ、複数条件）が期待通りに動作すること
      - コメント・イイね機能の動作
      - 権限に基づくアクセス制御（Admin/Editor/Userの差が正しく機能）
      - 基本的なパフォンマンステスト（同時アクセス100件程度で重大な応答遅延が発生しない）
    - 合格基準と試験担当:
      - 合格基準: 上記主要ケースが機能要件どおりに動作し、致命的なセキュリティ欠陥がないこと
      - 試験担当: PO（受け入れ者）／QA（暫定で開発チームが担う）

- **データ移行・初期データの有無**: 既存データの移行が必要か、フォーマット、ボリュームを把握するため。
  - 回答欄:
    - 移行対象のデータ有無とフォーマット:
      - 現時点では既存データの移行は想定していない（新規構築）。
      - 既存のドキュメントがある場合はCSV/Markdown等でのインポートスクリプトを別途検討。
    - ボリューム（件数/サイズの概算）:
      - 目安: 全社600名、初期投稿数数百〜数千件を想定（未確定、要確認）

- **バックアップ・リカバリ要件**: バックアップの方式、頻度、保持期間、復旧手順の要否を定義するため。
  - 回答欄:
    - バックアップ頻度・保持期間:
      - DB: 日次バックアップ（スナップショット）
      - ファイル添付: オブジェクトストレージに保存、バージョニング/日次バックアップ
      - 保持期間: 30〜90日（監査要件により増減）
    - 復旧手順の必要性（Y/N）と優先度:
      - 必要性: Y
      - 優先度: 高（業務継続に影響するため）

- **権限・ロールの詳細（アクセス制御マトリクス）**: どのロールがどの操作を行えるかを明確にするため（例: 編集者は投稿編集可能だが削除は不可等）。
  - 回答欄:
    - ロール一覧と各ロールの権限:
      - Admin:
        - 投稿の閲覧/編集/削除/承認、ユーザー管理、設定変更
      - Editor:
        - 投稿の作成/編集、他ユーザー投稿の提案（削除は不可）、コメント管理
      - User:
        - 投稿の作成/編集（自己投稿）、コメント/イイね
      - Viewer:
        - 閲覧のみ
      - Guest (未認証):
        - アクセス不可または限定的な閲覧のみ（要確認）

- **インフラ要件（クラウド/オンプレ、リージョン）**: 配置先（Azure/AWS/GCP/オンプレ）、リージョン要件、ネットワーク要件を把握するため。
  - 回答欄:
    - 希望するインフラ/リージョン:
      - 開発: Dockerベースのローカル/コンテナ環境（必須）
      - 本番想定: AWS、リージョンは `ap-northeast-1`（東京）を想定
    - ネットワークやファイアウォール制約:
      - 社内からのアクセスを前提としたIPアクセス制御やVPNの要否は要確認
      - 添付ファイル用の外部ストレージ（S3）へのアウトバウンド許可

- **予算・納期・リリース優先度**: 見積り精度とスケジュールを合わせるための前提情報。
  - 回答欄:
    - 希望納期（リリース日）:
      - 暫定: プロジェクト開始から3ヶ月以内にMVPリリース（確定要相談）
    - 予算上限（目安）:
      - 未確定 → 見積り後に提示。初期は小規模のSaaS/クラウド利用料と開発工数を想定して試算

- **既知の制約・リスク**: 技術制約や法令制約、依存関係など。事前に把握しておくと対策が立てやすいです。
  - 回答欄:
    - 既知の制約／懸念事項:
      - 本プロジェクトは疑似プロジェクトのため本番投入は想定外だが、本番移行を考慮した設計が必要
      - 社内ドメイン制限やメール認証により、既存ユーザーのアカウント移行が発生する可能性
      - 添付ファイルのウイルス対策や機密情報の取り扱いが未確定
      - ユーザーの情報共有意欲が低い場合、コンテンツ不足により運用効果が限定的になるリスク
      - スケーリング性（同時接続100件超）と応答時間要件の両立は設計上の検討事項

---

補助メモ:
- 上記は `docs/00_personal/nakamura/03_顧客要求事項.md` の内容（対象ユーザー数: 約600名、想定アクセス数: 1日50〜100回、応答時間3秒目標、稼働率99.9%、Docker開発、将来AWS本番など）を踏まえた暫定案です。
- 不確定な項目（担当者名、正確な納期・予算、既存データの有無など）は「保留」として明示し、プロジェクト初期のステークホルダー確認で確定してください。
