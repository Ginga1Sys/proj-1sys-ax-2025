<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="480" viewBox="0 0 1100 480">
  <style>
    .node{fill:#ffffff;stroke:#2d3748;stroke-width:1.6;}
    .title{font-family:Arial, Helvetica, sans-serif;font-size:13px;fill:#111;}
    .note{font-family:Arial, Helvetica, sans-serif;font-size:12px;fill:#333;}
  </style>

  <!-- Nodes -->
  <rect x="40" y="40" width="200" height="60" rx="8" class="node"/>
  <text x="140" y="78" text-anchor="middle" class="title">ユーザ（ブラウザ）</text>

  <rect x="280" y="40" width="220" height="60" rx="8" class="node"/>
  <text x="390" y="78" text-anchor="middle" class="title">Webアプリ（APIサーバ）</text>

  <rect x="620" y="20" width="180" height="60" rx="8" class="node"/>
  <text x="710" y="55" text-anchor="middle" class="title">認証サービス
  (社内IDP)</text>

  <rect x="620" y="120" width="180" height="60" rx="8" class="node"/>
  <text x="710" y="155" text-anchor="middle" class="title">検索インデックス
  (Elasticsearch)</text>

  <rect x="920" y="40" width="180" height="60" rx="8" class="node"/>
  <text x="1010" y="78" text-anchor="middle" class="title">DB（投稿・ユーザ）</text>

  <rect x="920" y="140" width="180" height="60" rx="8" class="node"/>
  <text x="1010" y="178" text-anchor="middle" class="title">ファイルストレージ
  (S3等)</text>

  <!-- Markers -->
  <defs>
    <marker id="arr" markerWidth="10" markerHeight="10" refX="6" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#2d3748" />
    </marker>
  </defs>

  <!-- Arrows -->
  <line x1="240" y1="70" x2="280" y2="70" stroke="#2d3748" stroke-width="2" marker-end="url(#arr)" />
  <line x1="500" y1="70" x2="620" y2="60" stroke="#2d3748" stroke-width="2" marker-end="url(#arr)" />
  <line x1="640" y1="80" x2="920" y2="80" stroke="#2d3748" stroke-width="2" marker-end="url(#arr)" />
  <line x1="500" y1="100" x2="620" y2="140" stroke="#2d3748" stroke-width="2" marker-end="url(#arr)" />
  <line x1="800" y1="140" x2="920" y2="160" stroke="#2d3748" stroke-width="2" marker-end="url(#arr)" />

  <!-- Notes -->
  <text x="420" y="115" class="note">・ブラウザ→API: 認証トークン付与/投稿CRUD/検索API</text>
  <text x="420" y="135" class="note">・API→検索インデックス: 検索用ドキュメント登録／更新</text>
  <text x="420" y="155" class="note">・API→DB: 投稿、ユーザ、コメントの永続化</text>
  <text x="420" y="175" class="note">・ファイルはアップロード後にファイルストレージへ保存</text>

</svg>
