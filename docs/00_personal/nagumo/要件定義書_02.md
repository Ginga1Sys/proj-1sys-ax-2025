# 要件定義書_02

作成日: 2025-11-27
作成者: ナグモ

## 1. ドキュメント目的
- 本書は、社内向けAI活用ナレッジ共有サイト（疑似プロジェクト）の要件定義をまとめる。
- 開発・設計・テスト・検収の基準として利用する。

## 2. 参照資料
- `03_顧客要求事項.md`（docs/00_personal/nakamura/03_顧客要求事項.md）

## 3. スコープ
- 本プロジェクトは社内AI活用ナレッジの投稿・検索・評価を行うサイトを構築する。
- 本番リリースはスコープ外（将来を見据えた設計を行う）。

## 4. 利害関係者
- 発注者（事業部）
- 利用者（全社員 約600名）
- 開発チーム
- 運用／管理者

## 5. ビジネス要件（参照）
- 社内のAI活用に関する情報を集約・検索可能にすること。
- 投稿・編集を容易にし、ナレッジ蓄積を促進すること。
- 投稿に対する評価（イイね）・コメント機能を実装すること。
- 社内ドメインでのユーザ認証とアクセス制御を実施すること。

（詳細は `03_顧客要求事項.md` を参照）

## 6. 成果物（本ドキュメントで作成）
- 要件定義書（本ファイル）
- 画面遷移図: `screen_transition.svg`
- データフロー図: `data_flow.svg`
- データ辞書（本書内 付録）

## 7. 業務要件（ゴール・範囲）
- ゴール: 社員がAI活用ナレッジを手軽に投稿・検索・参照できる環境を作る。
- 範囲: 投稿管理、検索、ユーザ管理、コメント・評価、ファイル添付。
- スコープ外: 管理ダッシュボードの高度分析、モバイル最適化（将来検討）。

## 8. 機能要件（詳細）
8.1 投稿・編集
- 登録済みユーザが投稿・編集可能。
- 投稿フォーマット: タイトル、本文、タグ、カテゴリー、画像、ファイル添付、外部リンク。
- 編集履歴の保存（バージョン管理）と差分閲覧。
- 管理者による承認ワークフロー（承認／却下／コメント）。

8.2 検索
- キーワード検索（タイトル、本文、タグ、投稿者）に対応。
- タグ検索、カテゴリー絞り込み、並び替え（新着・人気）。
- 検索結果のハイライト表示。

8.3 コメント・いいね
- 投稿に対する「イイね」ボタン。
- スレッド型コメント（返信可能）と編集・削除（権限あり）。

8.4 ユーザー認証・アクセス制御
- 社内ドメインのメールアドレスでの新規登録制限。
- ID/パスワード認証、パスワードリセット機能。
- ロール: 一般ユーザ、モデレータ（管理者）。
- 投稿の公開範囲（全社／部門限定）や閲覧制限の可能性を想定。

8.5 ファイル管理
- 画像・添付ファイルのアップロードとストレージ管理。
- ファイルサイズ制限、拡張子制限、ウイルススキャン要件は運用で確定。

8.6 管理機能（簡易）
- 投稿の一覧管理、ユーザー権限変更、通報／削除機能。

## 9. 非機能要件
9.1 パフォーマンス
- 平均応答時間: 3秒以内（ページロード／検索）。
- 同時アクセス想定: 50〜100/日だがピークで100同時接続を想定。

9.2 可用性
- 目標稼働率: 99.9%（将来の本番環境を想定して設計）。

9.3 セキュリティ
- パスワード等の認証情報はハッシュ化保存（bcrypt等）。
- HTTPS（SSL/TLS）を必須化。
- ログ監査、重要操作の記録を実施。

9.4 保守性・拡張性
- コンテナ（Docker）で環境を統一、モジュール化アーキテクチャを採用。

## 10. 画面仕様（概略）
- 想定画面: ホーム（投稿一覧）／投稿詳細／投稿作成／投稿編集／ログイン／マイページ（投稿履歴）
- デザイン方針: シンプルで直感的（要件より）

### 10.1 画面遷移図
下記の `screen_transition.svg` を参照。

## 11. データ要件
11.1 データ項目（主要）
- 投稿: id, title, body, author_id, tags[], category, created_at, updated_at, status(公開/下書き/承認待ち)
- ユーザ: id, name, email, hashed_password, role, created_at
- コメント: id, post_id, author_id, parent_comment_id, body, created_at
- ファイル: id, post_id, filename, path, size, content_type

11.2 データフロー
- サーバ（アプリ） ←→ DB、ファイルストレージ、認証サービス、検索インデックス（例: Elasticsearch）
- 詳細は `data_flow.svg` を参照。

## 12. ユースケース（主要）
- UC01: 投稿作成 — ユーザが新規投稿を作成しタグ付け、ファイル添付を行う。
- UC02: 投稿検索 — キーワード／タグで投稿を検索する。
- UC03: 投稿評価 — ユーザが「イイね」を押し、コメントを投稿する。
- UC04: 投稿承認 — 管理者が投稿を承認または却下する。

## 13. 受入基準（概要）
- 投稿作成・編集が正常に行えること。
- キーワード検索で関連投稿が上位に表示されること（簡易テスト）。
- 認証・アクセス制御が機能すること（社内ドメイン制限の確認）。
- ファイル添付が行え、ダウンロード可能であること。

## 14. 制約・前提
- Dockerを用いて開発環境を統一すること（参照資料に準拠）。
- 本番環境想定はAWS、CI/CDによりデプロイを想定。

## 15. リスクと対応案
- リスク: 社員の投稿定着が進まない → 対応: UX改善、投稿促進施策
- リスク: 機密情報の誤投稿 → 対応: アクセス制御、承認ワークフロー、教育

## 16. 配布・版管理
- 本書は版管理し、レビューの履歴を付記すること。

## 17. 付録A: データ辞書（簡易）
- 投稿.title — 投稿のタイトル（文字列、必須）
- 投稿.body — 投稿本文（Markdown可、必須）
- 投稿.tags — タグ（配列、任意）
- ユーザ.email — 社内ドメインのメールアドレス（ユニーク、必須）

---
images:
- 画面遷移図: `screen_transition.svg`
- データフロー図: `data_flow.svg`

以上
